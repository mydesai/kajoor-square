<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart | THE KAJOOR SQUARE CO.</title>
    <!-- Load Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // =======================================================
        // 🔑 CONFIGURATION (Minimal set for header/footer and product lookup)
        // =======================================================
        const config = {
            brand: {
                name: "THE KAJOOR SQUARE CO.",
                gold_part: "THE KAJOOR",
                black_part: "SQUARE CO.",
                established_year: "2012",
                address:  { 
                    text: "31 Dunrobin Crecent, Durban, South Africa", 
                    href: "https://maps.app.goo.gl/CG5K6uD8TDtB5QZ78" 
                }
            },
            // Product data needed to retrieve details if cart item only contains ID
            products: [
                { id: 1, name: "Majestic Medjool", unit_price: 49.99, image_url: "https://www.secretosdelsur.com/wp-content/uploads/2024/05/dates.jpg" },
                { id: 2, name: "Amber Delight", unit_price: 39.99, image_url: "https://cleangreensimple.com/wp-content/uploads/guide-to-dried-dates.jpg" },
                { id: 3, name: "Golden Crunch", unit_price: 59.99, image_url: "https://img.lb.wbmdstatic.com/vim/live/webmd/consumer_assets/site_images/article_thumbnails/SEEDs/1800x1200-medjool-dates-are-there-health-benefits-seed.jpg?resize=750px:*&output-quality=75" },
                { id: 4, name: "Royal Khalas", unit_price: 35.00, image_url: "https://theveganatlas.com/wp-content/uploads/2022/03/Dried-dates-in-a-wooden-bowl.jpg" }
            ],
            footer: {
                shop: [
                    { text: "Full Collection", href: "collection.html" },
                    { text: "Gifting Solutions", href: "gifting.html" }, 
                    { text: "Wholesale Inquiry", href: "mailto:inquiry@kajoorsquare.co" } 
                ],
                support: [
                    { text: "FAQ", href: "#" },
                    { text: "Shipping & Returns", href: "#" },
                    { text: "Call", href:"tel:+27728226614"} 
                ],
                social: [
                    { 
                        icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15V9a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4l1 3 3-3h6a2 2 0 0 0 2-2z"></path></svg>', 
                        href: "https://wa.me/27728226614?text=I%20have%20an%20inquiry%20about%20your%20premium%20dates." 
                    },
                    { 
                        icon: '<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>', 
                        href: "https://www.instagram.com/thekajoor_square_dates/" 
                    },
                    { icon: "", href: "#" } 
                ]
            }
        };

        // Customizing Tailwind to include our brand colors and fonts
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'date-gold': '#DAA520', 
                        'date-black': '#1E1E1E', 
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'], 
                        display: ['Playfair Display', 'serif'], 
                    },
                }
            }
        };

        // =======================================================
        // 🛒 CART MANAGEMENT LOGIC (Uses localStorage)
        // =======================================================
        const STORAGE_KEY = 'kajoor_cart';
        
        function getCart() {
            try {
                const cartString = localStorage.getItem(STORAGE_KEY);
                return cartString ? JSON.parse(cartString) : [];
            } catch (e) {
                console.error("Could not load cart from storage:", e);
                return [];
            }
        }

        function saveCart(cart) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(cart));
            updateCartDisplay(); // Refresh display after saving
        }

        /**
         * Updates the quantity of a product in the cart.
         * @param {number} productId 
         * @param {number} newQuantity 
         */
        window.updateQuantity = function(productId, newQuantity) {
            let cart = getCart();
            let itemIndex = cart.findIndex(item => item.id === productId);

            // Ensure quantity is a safe integer and at least 1, unless removing
            newQuantity = parseInt(newQuantity); 
            if (isNaN(newQuantity) || newQuantity < 1) {
                 removeItem(productId);
                 return;
            }

            if (itemIndex > -1) {
                cart[itemIndex].quantity = newQuantity;
                saveCart(cart);
            }
        }

        /**
         * Removes a product entirely from the cart.
         * @param {number} productId 
         */
        window.removeItem = function(productId) {
            let cart = getCart();
            cart = cart.filter(item => item.id !== productId);
            saveCart(cart);
        }

        // --- NEW: WHATSAPP ORDER LOGIC ---

        /**
         * Generates the pre-filled WhatsApp message with order details.
         */
        function generateWhatsAppMessage(cart, subtotal, shipping, total, name, address, date) {
            let message = "السَّلَامُ عَلَيْكُمْ (Peace be upon you). I would like to place an order from THE KAJOOR SQUARE CO. Please process my order as follows:\n\n";

            // Add customer details
            message += `CUSTOMER DETAILS:\n`;
            message += `> Name: ${name || 'N/A'}\n`;
            message += `> Address: ${address || 'N/A'}\n`;
            message += `> Required Date: ${date || 'ASAP'}\n\n`;


            message += `ORDER ITEMS:\n`;
            cart.forEach((item, index) => {
                // Displays item name, quantity, and item total price
                message += `• ${item.name} x ${item.quantity} (R${(item.price * item.quantity).toFixed(2)})\n`;
            });
            
            message += `\n---\n`;
            message += `FINANCIAL SUMMARY:\n`;
            message += `Subtotal: R${subtotal.toFixed(2)}\n`;
            message += `Shipping: ${shipping > 0 ? `R${shipping.toFixed(2)}` : 'FREE'}\n`;
            message += `TOTAL ORDER: R${total.toFixed(2)}\n`;
            message += `\nKindly confirm availability and proceed with the payment details. Jazak Allah Khair.`;
            
            return encodeURIComponent(message);
        }

        /**
         * Handles the WhatsApp link opening with the generated order message.
         */
        window.sendOrderViaWhatsApp = function(cart, subtotal, shipping, total) {
            // Retrieve customer input data
            const customerNameInput = document.getElementById('whatsapp-customer-name');
            const deliveryAddressInput = document.getElementById('whatsapp-delivery-address');
            const deliveryDateInput = document.getElementById('whatsapp-delivery-date');
            const phoneNumberInput = document.getElementById('whatsapp-phone-number');
            
            const customerName = customerNameInput.value.trim();
            const deliveryAddress = deliveryAddressInput.value.trim();
            const deliveryDate = deliveryDateInput.value;
            
            // Basic validation for required fields
            let isValid = true;
            
            // Reset placeholders/styles
            customerNameInput.classList.remove('border-red-500');
            deliveryAddressInput.classList.remove('border-red-500');

            if (!customerName) {
                customerNameInput.classList.add('border-red-500');
                isValid = false;
            }
            if (!deliveryAddress) {
                deliveryAddressInput.classList.add('border-red-500');
                isValid = false;
            }

            if (!isValid) {
                // Provide visual feedback if fields are missing
                return; 
            }
            
            // This number should be the seller's business WhatsApp number
            const targetNumber = '27728226614'; 
            
            // Pass new data to message generator
            const encodedMessage = generateWhatsAppMessage(
                cart, 
                subtotal, 
                shipping, 
                total, 
                customerName, 
                deliveryAddress, 
                deliveryDate
            );

            // Open link to the seller's number with the pre-filled order message
            window.open(`https://wa.me/${targetNumber}?text=${encodedMessage}`, '_blank');

            // Provide user feedback after opening the link
            phoneNumberInput.placeholder = "Message sent! We will contact you shortly.";
            
            setTimeout(() => {
                 phoneNumberInput.placeholder = "Optional: Your WhatsApp Number (+27...)";
            }, 3000);
        };
        
        /**
         * Renders the cart items and the summary panel.
         */
        function updateCartDisplay() {
            const cart = getCart();
            const itemsContainer = document.getElementById('cart-items-container');
            const summaryContainer = document.getElementById('cart-summary-wrapper');

            if (!itemsContainer || !summaryContainer) return;

            // --- Render Items ---
            if (cart.length === 0) {
                itemsContainer.innerHTML = `
                    <div class="py-16 text-center text-gray-600 bg-white p-8 rounded-xl shadow-inner border border-date-gold/20">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 mx-auto mb-4 text-date-gold" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                        <p class="font-display text-3xl font-bold mb-3 text-date-black">Your Cart is Empty.</p>
                        <a href="index.html" class="text-date-gold hover:text-date-black underline transition font-medium">Start Shopping Our Premium Dates</a>
                    </div>
                `;
                summaryContainer.classList.add('hidden');
                return;
            }
            
            summaryContainer.classList.remove('hidden');

            // Render Cart Items HTML
            itemsContainer.innerHTML = cart.map(item => {
                const totalItemPrice = (item.price * item.quantity).toFixed(2);
                return `
                    <div class="flex flex-col sm:flex-row items-center border-b border-gray-200 py-6 md:py-8 last:border-b-0 bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition duration-200">
                        <!-- Product Image -->
                        <div class="w-24 h-24 flex-shrink-0 mb-4 sm:mb-0">
                            <img 
                                src="${item.image}" 
                                alt="${item.name}" 
                                class="w-full h-full object-cover object-center rounded-lg shadow-md border-2 border-date-gold/50"
                                onerror="this.onerror=null; this.src='https://placehold.co/96x96/1E1E1E/DAA520?text=Date';"
                            >
                        </div>

                        <!-- Product Details -->
                        <div class="flex-grow sm:ml-6 text-center sm:text-left w-full">
                            <h3 class="font-display text-xl md:text-2xl font-bold text-date-black mb-1">${item.name}</h3>
                            <p class="text-gray-500 text-sm mb-3">Price: R${item.price.toFixed(2)} / Box</p>
                            
                            <div class="flex items-center justify-center sm:justify-start mt-3 space-x-4">
                                <!-- Quantity Control -->
                                <div class="flex items-center border border-gray-300 rounded-full overflow-hidden shadow-sm">
                                    <button onclick="updateQuantity(${item.id}, ${item.quantity - 1})" class="p-2 w-8 h-8 text-xl font-bold bg-gray-100 hover:bg-gray-200 transition text-date-black">-</button>
                                    <input 
                                        type="number" 
                                        min="1" 
                                        value="${item.quantity}" 
                                        onchange="updateQuantity(${item.id}, parseInt(this.value))"
                                        class="w-12 text-center border-none focus:ring-0 p-0 text-date-black font-semibold"
                                    >
                                    <button onclick="updateQuantity(${item.id}, ${item.quantity + 1})" class="p-2 w-8 h-8 text-xl font-bold bg-gray-100 hover:bg-gray-200 transition text-date-black">+</button>
                                </div>
                                
                                <!-- Remove Button -->
                                <button onclick="removeItem(${item.id})" class="text-sm text-red-500 hover:text-red-700 transition font-medium">
                                    Remove
                                </button>
                            </div>
                        </div>

                        <!-- Total Price -->
                        <div class="mt-4 sm:mt-0 sm:ml-auto flex flex-col items-end">
                            <p class="text-2xl font-bold text-date-gold">R${totalItemPrice}</p>
                            <p class="text-sm text-gray-500">(Item Total)</p>
                        </div>
                    </div>
                `;
            }).join('');

            // --- Calculate Summary ---
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal > 150 ? 0.00 : 35.00; // Mock: Free shipping over R150
            const total = subtotal + shipping;
            
            // --- Render Summary and WhatsApp Section ---
            summaryContainer.innerHTML = `
                <!-- Existing Summary -->
                <div class="bg-date-black text-white p-6 rounded-xl shadow-2xl border-t-4 border-date-gold mb-8">
                    <h3 class="text-2xl font-display font-bold mb-4 border-b border-gray-700 pb-3">Order Summary</h3>
                    
                    <div class="space-y-3 mb-6">
                        <div class="flex justify-between">
                            <span class="text-lg">Subtotal:</span>
                            <span class="font-semibold text-date-gold">R${subtotal.toFixed(2)}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-lg">Shipping:</span>
                            <span class="font-semibold">${shipping > 0 ? `R${shipping.toFixed(2)}` : 'FREE'}</span>
                        </div>
                        <div class="flex justify-between border-t border-gray-600 pt-4">
                            <span class="text-xl font-bold">Order Total:</span>
                            <span class="text-2xl font-bold text-date-gold">R${total.toFixed(2)}</span>
                        </div>
                    </div>
                    
                    <button onclick="alert('Proceeding to a mock checkout! The total is R${total.toFixed(2)}')" class="w-full py-4 bg-date-gold text-date-black text-xl font-bold rounded-full shadow-lg hover:bg-white transition duration-300 transform hover:scale-[1.01] active:scale-95">
                        Proceed to Checkout (Mock)
                    </button>
                    <p class="text-xs text-gray-400 mt-3">Taxes calculated at checkout. This is a mock function.</p>
                </div>

                <!-- NEW: WhatsApp Order Section -->
                <div class="bg-white p-6 rounded-xl shadow-2xl border-4 border-date-gold/50">
                    <h3 class="flex items-center text-xl font-display font-bold text-date-black mb-3">
                         <!-- WhatsApp Icon (SVG) -->
                         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 mr-2 text-green-500">
                              <path fill-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3.5 13.5c-.32.48-1.28.96-2.5.96-1.92 0-3.5-1.58-3.5-3.5 0-1.22.48-2.18.96-2.5l-.64-.64c-.32-.32-.32-.84 0-1.16.32-.32.84-.32 1.16 0l.64.64c.32-.48.96-.96 1.92-.96 1.92 0 3.5 1.58 3.5 3.5 0 1.22-.48 2.18-.96 2.5l.64.64c.32.32.32.84 0 1.16-.32.32-.84.32-1.16 0l-.64-.64zM12 4.2c-4.3 0-7.8 3.5-7.8 7.8s3.5 7.8 7.8 7.8 7.8-3.5 7.8-7.8-3.5-7.8-7.8-7.8z"/>
                         </svg>
                        Place Order via WhatsApp
                    </h3>
                    <p class="text-sm text-gray-700 mb-4">Please fill in your details below to send your full order summary to our sales team for fast, manual processing.</p>
                    
                    <!-- Customer Name -->
                    <input 
                        type="text" 
                        id="whatsapp-customer-name"
                        placeholder="Your Full Name (Required)" 
                        required
                        class="w-full p-3 mb-3 border-2 border-gray-300 rounded-lg focus:ring-date-gold focus:border-date-gold text-date-black placeholder-gray-500 transition duration-300"
                    />
                    
                    <!-- Delivery Address -->
                     <input 
                        type="text" 
                        id="whatsapp-delivery-address"
                        placeholder="Delivery Address (Required)" 
                        required
                        class="w-full p-3 mb-3 border-2 border-gray-300 rounded-lg focus:ring-date-gold focus:border-date-gold text-date-black placeholder-gray-500 transition duration-300"
                    />
                    
                    <!-- Required Delivery Date -->
                     <input 
                        type="date" 
                        id="whatsapp-delivery-date"
                        placeholder="Required Delivery Date" 
                        class="w-full p-3 mb-3 border-2 border-gray-300 rounded-lg focus:ring-date-gold focus:border-date-gold text-date-black placeholder-gray-500 transition duration-300"
                    />

                    <!-- Optional Phone Number -->
                    <input 
                        type="tel" 
                        id="whatsapp-phone-number"
                        placeholder="Optional: Your WhatsApp Number (+27...)" 
                        class="w-full p-3 mb-4 border-2 border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-date-black placeholder-gray-500 transition duration-300"
                    />

                    <!-- The button now passes the necessary data to the handler function -->
                    <button onclick="sendOrderViaWhatsApp(getCart(), ${subtotal.toFixed(2)}, ${shipping.toFixed(2)}, ${total.toFixed(2)})" class="w-full py-3 bg-green-500 text-white text-lg font-bold rounded-lg shadow-md shadow-green-500/50 hover:bg-green-600 transition duration-300 transform active:scale-95">
                        Place Order via WhatsApp
                    </button>
                    <p class="text-xs text-gray-500 mt-3">You will be redirected to WhatsApp to confirm the message.</p>
                </div>
            `;
        }


        // =======================================================
        // ⚙️ INITIALIZATION & SHARED HEADER/FOOTER FUNCTIONS
        // =======================================================

        // Helper functions for rendering header/footer
        function renderListLinks(containerId, links) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = links.map(link => 
                `<li><a href="${link.href}" class="hover:text-date-gold transition">${link.text}</a></li>`
            ).join('');
        }

        function renderSocialLinks(containerId, links) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = links.map(link => 
                `<a href="${link.href}" target="_blank" class="text-date-gold hover:text-white transition duration-300 p-2 rounded-full hover:bg-date-gold/20 flex items-center justify-center">
                    ${link.icon}
                </a>`
            ).join('');
        }
        
        function renderContent() {
            // Header Logo
            const brandLogo = document.getElementById('brand-logo');
            if (brandLogo) {
                brandLogo.innerHTML = `<span class="text-date-gold">${config.brand.gold_part}</span> ${config.brand.black_part}`;
            }

            // Navigation Links
            const navLinks = `
                <a href="index.html" onclick="closeMobileMenu()" class="text-date-black hover:text-date-gold transition duration-200">Home</a>
                <a href="collection.html" onclick="closeMobileMenu()" class="text-date-black hover:text-date-gold transition duration-200">Collection</a>
                <a href="gifting.html" onclick="closeMobileMenu()" class="text-date-black hover:text-date-gold transition duration-200">Gifting</a>
                <a href="about.html" onclick="closeMobileMenu()" class="text-date-black hover:text-date-gold transition duration-200">Our Story</a>
                <a href="cart.html" onclick="closeMobileMenu()" class="text-date-gold font-bold transition duration-200">Cart</a>
            `;
            
            document.getElementById('main-nav').innerHTML = navLinks;
            document.getElementById('mobile-nav').innerHTML = navLinks;

            // Footer Content
            document.getElementById('footer-brand-name').textContent = config.brand.name;
            document.getElementById('footer-established').textContent = `Distributers of the Finest Dates since ${config.brand.established_year}.`;
            
            const footerAddress = document.getElementById('footer-address');
            if (footerAddress) {
                 footerAddress.innerHTML = `
                    <a href="${config.brand.address.href}" target="_blank" class="hover:text-date-gold transition duration-200">
                        ${config.brand.address.text}
                    </a>
                `;
            }

            document.getElementById('footer-copyright').textContent = `© 2025 ${config.brand.name} All Rights Reserved.`;

            renderListLinks('footer-shop-links', config.footer.shop);
            renderListLinks('footer-support-links', config.footer.support);
            renderSocialLinks('footer-social-links', config.footer.social);
            
            // Call the cart rendering function
            updateCartDisplay();
        }

        // === Mobile Menu Logic ===
        function openMobileMenu() {
            document.getElementById('mobile-menu').classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        function closeMobileMenu() {
            document.getElementById('mobile-menu').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }

        function setupMobileMenu() {
            document.getElementById('menu-button').onclick = openMobileMenu;
            document.getElementById('close-menu-button').onclick = closeMobileMenu;
        }

        window.onload = function() {
            renderContent();
            setupMobileMenu();
        };

    </script>
    <style>
        /* Custom styles for gold/black theme */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #DAA520; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8860c; }
        
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
          -webkit-appearance: none; 
          margin: 0; 
        }
        /* Style for the date input placeholder/text color */
        input[type="date"] {
            color: #1E1E1E; /* Black text */
        }
        input[type="date"]:focus {
             border-color: #DAA520;
             box-shadow: 0 0 0 1px #DAA520;
        }
    </style>
</head>
<body class="bg-date-black/5 text-date-black font-sans antialiased min-h-screen flex flex-col">

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="hidden fixed inset-0 z-50 bg-date-black/95 backdrop-blur-md">
        <div class="flex flex-col h-full items-center justify-center space-y-8">
            <button id="close-menu-button" class="absolute top-6 right-6 text-date-gold hover:text-white transition" aria-label="Close Menu">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
            <nav id="mobile-nav" class="flex flex-col space-y-6 text-3xl font-display font-bold text-white text-center">
                <!-- Mobile Links dynamically updated in JS renderContent() -->
            </nav>
        </div>
    </div>
    
    <!-- Header & Navigation -->
    <header class="sticky top-0 z-40 bg-white/95 backdrop-blur-sm shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Logo/Brand Name -->
            <a href="index.html" class="text-3xl font-display font-bold text-date-black tracking-wider" id="brand-logo">
                <!-- Content injected by JavaScript -->
            </a>
            
            <!-- Desktop Navigation -->
            <nav id="main-nav" class="hidden md:flex space-x-8 text-lg font-medium">
                <!-- Links dynamically updated in JS renderContent() -->
            </nav>

            <!-- Actions (Cart & Mobile Menu Button) -->
            <div class="flex items-center space-x-4">
                <!-- Cart Icon -->
                <a href="cart.html" class="p-2 text-date-gold transition duration-200 relative" aria-label="Shopping Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <path d="M16 10a4 4 0 0 1-8 0"></path>
                    </svg>
                </a>
                
                <!-- Mobile Menu Button (Hamburger) -->
                <button id="menu-button" class="md:hidden text-date-black p-2 rounded-lg hover:bg-date-black/10 transition" aria-label="Open Menu">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
            </div>
            
        </div>
    </header>

    <main class="flex-grow py-12 md:py-20">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="font-display text-5xl font-extrabold text-date-black mb-8 text-center md:text-left">
                Your <span class="text-date-gold">Basket</span>
            </h1>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                
                <!-- Cart Items List (2/3 width) -->
                <div class="lg:col-span-2">
                    <div id="cart-items-container" class="space-y-4">
                        <!-- Cart items will be injected here by JavaScript -->
                    </div>
                </div>

                <!-- Order Summary (1/3 width) -->
                <div id="cart-summary-wrapper" class="lg:col-span-1 sticky top-28 h-fit">
                    <!-- Cart summary will be injected here by JavaScript, including the new WhatsApp block -->
                </div>

            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-date-black text-white py-12 mt-auto border-t-4 border-date-gold">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                
                <!-- Brand Info -->
                <div>
                    <h3 id="footer-brand-name" class="font-display text-2xl font-bold text-date-gold mb-4"><!-- Content injected by JavaScript --></h3>
                    <p id="footer-established" class="text-gray-400 text-sm mb-2">Distributers of the Finest Dates since ${config.brand.established_year}.</p>
                    <p id="footer-address" class="text-gray-400 text-sm"><!-- Content injected by JavaScript --></p>
                </div>

                <!-- Links - Shop -->
                <div>
                    <h4 class="text-lg font-semibold mb-3">Shop</h4>
                    <ul id="footer-shop-links" class="space-y-2 text-sm text-gray-400">
                        <!-- Links dynamically generated by JS -->
                    </ul>
                </div>

                <!-- Links - Support -->
                <div>
                    <h4 class="text-lg font-semibold mb-3">Support</h4>
                    <ul id="footer-support-links" class="space-y-2 text-sm text-gray-400">
                        <!-- Links dynamically generated by JS -->
                    </ul>
                </div>
                
                <!-- Social -->
                <div>
                    <h4 class="text-lg font-semibold mb-3">Connect</h4>
                    <div id="footer-social-links" class="flex space-x-4">
                        <!-- Links dynamically generated by JS -->
                    </div>
                </div>
            </div>

            <div class="mt-10 pt-6 border-t border-gray-700 text-center">
                <p id="footer-copyright" class="text-sm text-gray-500"><!-- Content injected by JavaScript --></p>
            </div>
        </div>
    </footer>

</body>
</html>
